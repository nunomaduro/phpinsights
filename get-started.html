<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Get started | PHP Insights</title>
    <meta name="description" content="The perfect starting point to analyze the code quality of your PHP projects">
    <link rel="icon" href="/phpinsights/heart.png">
  <link rel="icon" href="/phpinsights/heart.svg" type="image/svg+xml">
    
    <link rel="preload" href="/phpinsights/assets/css/0.styles.bc769498.css" as="style"><link rel="preload" href="/phpinsights/assets/js/app.d574d0de.js" as="script"><link rel="preload" href="/phpinsights/assets/js/9.3524bd5f.js" as="script"><link rel="preload" href="/phpinsights/assets/js/4.79bcaecf.js" as="script"><link rel="prefetch" href="/phpinsights/assets/js/10.c0dcab5d.js"><link rel="prefetch" href="/phpinsights/assets/js/11.bcbe5196.js"><link rel="prefetch" href="/phpinsights/assets/js/12.c45c58bc.js"><link rel="prefetch" href="/phpinsights/assets/js/13.d946a80f.js"><link rel="prefetch" href="/phpinsights/assets/js/14.0e4fc24f.js"><link rel="prefetch" href="/phpinsights/assets/js/15.ef0965f4.js"><link rel="prefetch" href="/phpinsights/assets/js/16.8419ccaa.js"><link rel="prefetch" href="/phpinsights/assets/js/17.2fe5d657.js"><link rel="prefetch" href="/phpinsights/assets/js/18.1b3f0511.js"><link rel="prefetch" href="/phpinsights/assets/js/19.e3d00eed.js"><link rel="prefetch" href="/phpinsights/assets/js/3.b58f0b36.js"><link rel="prefetch" href="/phpinsights/assets/js/5.ec31a523.js"><link rel="prefetch" href="/phpinsights/assets/js/6.4c0b8ba5.js"><link rel="prefetch" href="/phpinsights/assets/js/7.95aa723d.js"><link rel="prefetch" href="/phpinsights/assets/js/8.75498f8f.js"><link rel="prefetch" href="/phpinsights/assets/js/vendors~docsearch.2aecb5c0.js">
    <link rel="stylesheet" href="/phpinsights/assets/css/0.styles.bc769498.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/phpinsights/" class="home-link router-link-active"><!----> <span class="site-name">PHP Insights</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/phpinsights/changelog.html" class="nav-link">Changelog</a></div> <a href="https://github.com/nunomaduro/phpinsights" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/phpinsights/changelog.html" class="nav-link">Changelog</a></div> <a href="https://github.com/nunomaduro/phpinsights" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/phpinsights/get-started.html" aria-current="page" class="active sidebar-link">Get started</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#within-laravel" class="sidebar-link">Within Laravel</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#within-lumen" class="sidebar-link">Within Lumen</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#with-docker" class="sidebar-link">With Docker</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#analyse-a-sub-directory-or-a-specific-file" class="sidebar-link">Analyse a sub-directory or a specific file</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#fixing-errors-automatically" class="sidebar-link">Fixing errors automatically</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#analyse-multiple-paths" class="sidebar-link">Analyse multiple paths</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#specify-composer-file" class="sidebar-link">Specify composer file</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#formatting-the-output" class="sidebar-link">Formatting the output</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#saving-output-to-file" class="sidebar-link">Saving output to file</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#allowed-memory-size-of-x-bytes-exhausted" class="sidebar-link">Allowed memory size of X bytes exhausted</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#display-issues-omitted" class="sidebar-link">Display issues omitted</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#avoid-composer-conflicts" class="sidebar-link">Avoid Composer conflicts</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#flush-cache-results" class="sidebar-link">Flush cache results</a></li><li class="sidebar-sub-header"><a href="/phpinsights/get-started.html#configure-diff" class="sidebar-link">Configure diff</a></li></ul></li><li><a href="/phpinsights/testimonial.html" class="sidebar-link">What others think about PHP Insights</a></li><li><a href="/phpinsights/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/phpinsights/continuous-integration.html" class="sidebar-link">Continuous Integration</a></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Insights</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/phpinsights/insights/" class="sidebar-link">Configure Insights</a></li><li><a href="/phpinsights/insights/code.html" class="sidebar-link">Code</a></li><li><a href="/phpinsights/insights/architecture.html" class="sidebar-link">Architecture</a></li><li><a href="/phpinsights/insights/complexity.html" class="sidebar-link">Complexity</a></li><li><a href="/phpinsights/insights/style.html" class="sidebar-link">Style</a></li></ul></div></li><li><a href="/phpinsights/ide.html" class="sidebar-link">IDE Integration</a></li><li><a href="/phpinsights/contribute.html" class="sidebar-link">Contribute</a></li><li><a href="/phpinsights/support.html" class="sidebar-link">Support the development</a></li><li><a href="/phpinsights/changelog.html" class="sidebar-link">Changelog</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="get-started"><a href="#get-started" class="header-anchor">#</a> Get started</h1> <blockquote><p><strong>Requires:</strong> <a href="https://php.net/releases/" target="_blank" rel="noopener noreferrer">PHP 7.4+<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>First, install PHP Insights via the <code>Composer</code> package manager:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">composer</span> require nunomaduro/phpinsights <span class="token parameter variable">--dev</span>
</code></pre></div><p>Then, use the <code>phpinsights</code> binary:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Mac &amp; Linux</span>
./vendor/bin/phpinsights

<span class="token comment"># Windows</span>
.<span class="token punctuation">\</span>vendor<span class="token punctuation">\</span>bin<span class="token punctuation">\</span>phpinsights.bat
</code></pre></div><h2 id="within-laravel"><a href="#within-laravel" class="header-anchor">#</a> Within Laravel</h2> <p>First, you should publish the config-file with:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan vendor:publish <span class="token parameter variable">--provider</span><span class="token operator">=</span><span class="token string">&quot;NunoMaduro\PhpInsights\Application\Adapters\Laravel\InsightsServiceProvider&quot;</span>
</code></pre></div><p>Then, use the <code>insights</code> Artisan command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan insights
</code></pre></div><blockquote><p>Note for Laravel 7 users: phpinsights requires <a href="https://php.net/releases/" target="_blank" rel="noopener noreferrer">PHP 7.3+<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and <code>PHPUnit 9.0+</code>. For upgrading PHPUnit, you can use following command:</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">composer</span> require <span class="token parameter variable">--dev</span> phpunit/phpunit:^9.0 --update-with-dependencies
</code></pre></div><h2 id="within-lumen"><a href="#within-lumen" class="header-anchor">#</a> Within Lumen</h2> <p>Because we cannot use Artisan's publish command within a Lumen project you must manually copy the config file into your project:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> vendor/nunomaduro/phpinsights/stubs/laravel.php config/insights.php
</code></pre></div><p>Then register the <code>phpinsights</code> provider and load the configuration into the application within your <code>bootstrap/app.php</code> file:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$app</span><span class="token operator">-&gt;</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\</span>NunoMaduro<span class="token punctuation">\</span>PhpInsights<span class="token punctuation">\</span>Application<span class="token punctuation">\</span>Adapters<span class="token punctuation">\</span>Laravel<span class="token punctuation">\</span>InsightsServiceProvider</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$app</span><span class="token operator">-&gt;</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'insights'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>And setup is done, so you can now run <code>phpinsights</code> with the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan insights
</code></pre></div><h2 id="with-docker"><a href="#with-docker" class="header-anchor">#</a> With Docker</h2> <p>You can also use <code>phpinsights</code> via Docker:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-it</span> <span class="token parameter variable">--rm</span> <span class="token parameter variable">-v</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>:/app&quot;</span> nunomaduro/phpinsights
</code></pre></div><h2 id="analyse-a-sub-directory-or-a-specific-file"><a href="#analyse-a-sub-directory-or-a-specific-file" class="header-anchor">#</a> Analyse a sub-directory or a specific file</h2> <p>You can ask <code>phpinsights</code> to analyse only a directory or even a specific file by providing path with <code>analyse</code> command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># For a directory</span>
./vendor/bin/phpinsights analyse path/to/analyse

<span class="token comment"># For a file</span>
./vendor/bin/phpinsights analyse path/to/analyse.php
</code></pre></div><p>In laravel, launch command as usual with your path:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan insights path/to/analyse
</code></pre></div><h2 id="fixing-errors-automatically"><a href="#fixing-errors-automatically" class="header-anchor">#</a> Fixing errors automatically <span class="badge tip top" data-v-099ab69c>^2.0</span></h2> <p>Some Insights support automatic fixing.
To fix your code automatically, there are two possibilities:</p> <ul><li>Add <code>--fix</code> option to your command. The output will be the classical output, with a summary of all issues fixed.</li> <li>Or launch <code>phpinsights fix [directory]</code></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Classical command with --fix option</span>
vendor/bin/phpinsights analyse path/to/analyse <span class="token parameter variable">--fix</span>

<span class="token comment"># In laravel</span>
php artisan insights path/to/analyse <span class="token parameter variable">--fix</span>

<span class="token comment"># Just fix</span>
vendor/bin/phpinsights fix path/to/analyse
</code></pre></div><h2 id="analyse-multiple-paths"><a href="#analyse-multiple-paths" class="header-anchor">#</a> Analyse multiple paths <span class="badge tip top" data-v-099ab69c>^2.0</span></h2> <p>You can ask <code>phpinsights</code> to analyse multiple directories, multiple files or even combining them by providing multiple paths with <code>analyse</code> command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># For multiple directories</span>
./vendor/bin/phpinsights analyse path/to/dir1 path/to/dir2

<span class="token comment"># For multiple files</span>
./vendor/bin/phpinsights analyse path/to/file1.php path/to/file2.php

<span class="token comment"># Combined</span>
./vendor/bin/phpinsights analyse path/to/dir path/to/file.php
</code></pre></div><p>In laravel, launch command as usual with your paths:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan insights path/to/dir path/to/file.php
</code></pre></div><h2 id="specify-composer-file"><a href="#specify-composer-file" class="header-anchor">#</a> Specify composer file <span class="badge tip top" data-v-099ab69c>^2.0</span></h2> <p>Optionally, you can specify your composer file by adding the <code>composer</code> flag as below:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./vendor/bin/phpinsights analyse <span class="token parameter variable">--composer</span><span class="token operator">=</span>/var/www/composer.json
</code></pre></div><h2 id="formatting-the-output"><a href="#formatting-the-output" class="header-anchor">#</a> Formatting the output</h2> <p>For changing the output format you can add the <code>format</code> flag. The following formats are supported:</p> <ul><li>console</li> <li>json</li> <li>checkstyle</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>./vendor/bin/phpinsights analyse <span class="token parameter variable">--format</span><span class="token operator">=</span>json
</code></pre></div><h2 id="saving-output-to-file"><a href="#saving-output-to-file" class="header-anchor">#</a> Saving output to file</h2> <p>You can pipe the result to a file or to anywhere you like.
A common use case is parsing the output formatted as json to a json file.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./vendor/bin/phpinsights analyse <span class="token parameter variable">--format</span><span class="token operator">=</span>json <span class="token operator">&gt;</span> test.json
</code></pre></div><p>When piping the result remember to add the no interaction flag <code>-n</code>, as the part where you need to interact is also getting piped. (the json format does not have any interaction)
While piping data, if you want the progress bar to refresh itself instead of printing a new one, add the <code>--ansi</code> flag.</p> <h2 id="allowed-memory-size-of-x-bytes-exhausted"><a href="#allowed-memory-size-of-x-bytes-exhausted" class="header-anchor">#</a> Allowed memory size of X bytes exhausted</h2> <p>If you encounter the error <code>Allowed memory size of XXXXX bytes exhausted</code>, the current workaround is to increase the memory limit:</p> <div class="language- extra-class"><pre class="language-text"><code>php -d memory_limit=2000M ./vendor/bin/phpinsights
</code></pre></div><h2 id="display-issues-omitted"><a href="#display-issues-omitted" class="header-anchor">#</a> Display issues omitted</h2> <p>The PHP Insights console command has different verbosity levels, which determine the quantity of issues displayed. By default, commands display only the 3 first issues per <code>Insight</code>, but you can display them all with the <code>-v</code> option:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>./vendor/bin/phpinsights <span class="token parameter variable">-v</span>
</code></pre></div><h2 id="avoid-composer-conflicts"><a href="#avoid-composer-conflicts" class="header-anchor">#</a> Avoid Composer conflicts</h2> <p>If you have trouble while requiring <code>phpinsights</code> with composer, try installing it with <a href="https://github.com/bamarni/composer-bin-plugin" target="_blank" rel="noopener noreferrer">bamarni/composer-bin-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to isolate it from others dependencies:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">composer</span> require <span class="token parameter variable">--dev</span> bamarni/composer-bin-plugin
<span class="token function">composer</span> bin phpinsights require nunomaduro/phpinsights
./vendor/bin/phpinsights
</code></pre></div><h2 id="flush-cache-results"><a href="#flush-cache-results" class="header-anchor">#</a> Flush cache results <span class="badge tip top" data-v-099ab69c>^2.0</span></h2> <p>Between 2 analyses, issues are cached.
PHPInsights is smart enough to invalidate cache when it detects changes in your code, but you may completely flush cache before analysis by adding <code>--flush-cache</code> flag.</p> <h2 id="configure-diff"><a href="#configure-diff" class="header-anchor">#</a> Configure diff <span class="badge tip top" data-v-099ab69c>^2.0</span></h2> <p>Some insights display a diff output.
If you want more context on the diff, configure it in the <code>phpinsights.php</code> file:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token string single-quoted-string">'diff_context'</span> <span class="token operator">=&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/phpinsights/testimonial.html">
          What others think about PHP Insights
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="/phpinsights/assets/js/app.d574d0de.js" defer></script><script src="/phpinsights/assets/js/9.3524bd5f.js" defer></script><script src="/phpinsights/assets/js/4.79bcaecf.js" defer></script>
  </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{187:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("Requires:")]),t._v(" "),s("a",{attrs:{href:"https://php.net/releases/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHP 7.4+"),s("OutboundLink")],1)])]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._m(5),t._v(" "),s("p",[t._v("First, you should publish the config-file with:")]),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),s("blockquote",[s("p",[t._v("Note for Laravel 7 users: phpinsights requires "),s("a",{attrs:{href:"https://php.net/releases/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHP 7.3+"),s("OutboundLink")],1),t._v(", and "),s("code",[t._v("PHPUnit 9.0+")]),t._v(". For upgrading PHPUnit, you can use following command:")])]),t._v(" "),t._m(9),t._m(10),t._v(" "),s("p",[t._v("Because we cannot use Artisan's publish command within a Lumen project you must manually copy the config file into your project:")]),t._v(" "),t._m(11),t._m(12),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),s("p",[t._v("In laravel, launch command as usual with your path:")]),t._v(" "),t._m(22),s("h2",{attrs:{id:"fixing-errors-automatically"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fixing-errors-automatically"}},[t._v("#")]),t._v(" Fixing errors automatically "),s("Badge",{attrs:{text:"^2.0"}})],1),t._v(" "),s("p",[t._v("Some Insights support automatic fixing.\nTo fix your code automatically, there are two possibilities:")]),t._v(" "),t._m(23),t._v(" "),t._m(24),s("h2",{attrs:{id:"analyse-multiple-paths"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#analyse-multiple-paths"}},[t._v("#")]),t._v(" Analyse multiple paths "),s("Badge",{attrs:{text:"^2.0"}})],1),t._v(" "),t._m(25),t._v(" "),t._m(26),s("p",[t._v("In laravel, launch command as usual with your paths:")]),t._v(" "),t._m(27),s("h2",{attrs:{id:"specify-composer-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#specify-composer-file"}},[t._v("#")]),t._v(" Specify composer file "),s("Badge",{attrs:{text:"^2.0"}})],1),t._v(" "),t._m(28),t._v(" "),t._m(29),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._m(34),t._v(" "),s("p",[t._v("You can pipe the result to a file or to anywhere you like.\nA common use case is parsing the output formatted as json to a json file.")]),t._v(" "),t._m(35),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._m(43),t._v(" "),s("p",[t._v("If you have trouble while requiring "),s("code",[t._v("phpinsights")]),t._v(" with composer, try installing it with "),s("a",{attrs:{href:"https://github.com/bamarni/composer-bin-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("bamarni/composer-bin-plugin"),s("OutboundLink")],1),t._v(" to isolate it from others dependencies:")]),t._v(" "),t._m(44),s("h2",{attrs:{id:"flush-cache-results"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flush-cache-results"}},[t._v("#")]),t._v(" Flush cache results "),s("Badge",{attrs:{text:"^2.0"}})],1),t._v(" "),t._m(45),t._v(" "),s("h2",{attrs:{id:"configure-diff"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configure-diff"}},[t._v("#")]),t._v(" Configure diff "),s("Badge",{attrs:{text:"^2.0"}})],1),t._v(" "),t._m(46),t._v(" "),t._m(47)])}),[function(){var t=this._self._c;return t("h1",{attrs:{id:"get-started"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#get-started"}},[this._v("#")]),this._v(" Get started")])},function(){var t=this._self._c;return t("p",[this._v("First, install PHP Insights via the "),t("code",[this._v("Composer")]),this._v(" package manager:")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("composer")]),this._v(" require nunomaduro/phpinsights "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[this._v("--dev")]),this._v("\n")])])])},function(){var t=this._self._c;return t("p",[this._v("Then, use the "),t("code",[this._v("phpinsights")]),this._v(" binary:")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Mac & Linux")]),t._v("\n./vendor/bin/phpinsights\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Windows")]),t._v("\n."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("vendor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("phpinsights.bat\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"within-laravel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#within-laravel"}},[this._v("#")]),this._v(" Within Laravel")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("php artisan vendor:publish "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[this._v("--provider")]),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[this._v('"NunoMaduro\\PhpInsights\\Application\\Adapters\\Laravel\\InsightsServiceProvider"')]),this._v("\n")])])])},function(){var t=this._self._c;return t("p",[this._v("Then, use the "),t("code",[this._v("insights")]),this._v(" Artisan command:")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("php artisan insights\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("composer")]),this._v(" require "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[this._v("--dev")]),this._v(" phpunit/phpunit:^9.0 --update-with-dependencies\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"within-lumen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#within-lumen"}},[this._v("#")]),this._v(" Within Lumen")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("cp")]),this._v(" vendor/nunomaduro/phpinsights/stubs/laravel.php config/insights.php\n")])])])},function(){var t=this._self._c;return t("p",[this._v("Then register the "),t("code",[this._v("phpinsights")]),this._v(" provider and load the configuration into the application within your "),t("code",[this._v("bootstrap/app.php")]),this._v(" file:")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name class-name-fully-qualified static-context"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("NunoMaduro"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("PhpInsights"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Adapters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Laravel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("InsightsServiceProvider")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'insights'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this._self._c;return t("p",[this._v("And setup is done, so you can now run "),t("code",[this._v("phpinsights")]),this._v(" with the following command:")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("php artisan insights\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"with-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#with-docker"}},[this._v("#")]),this._v(" With Docker")])},function(){var t=this._self._c;return t("p",[this._v("You can also use "),t("code",[this._v("phpinsights")]),this._v(" via Docker:")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(':/app"')]),t._v(" nunomaduro/phpinsights\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"analyse-a-sub-directory-or-a-specific-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#analyse-a-sub-directory-or-a-specific-file"}},[this._v("#")]),this._v(" Analyse a sub-directory or a specific file")])},function(){var t=this._self._c;return t("p",[this._v("You can ask "),t("code",[this._v("phpinsights")]),this._v(" to analyse only a directory or even a specific file by providing path with "),t("code",[this._v("analyse")]),this._v(" command:")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# For a directory")]),this._v("\n./vendor/bin/phpinsights analyse path/to/analyse\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# For a file")]),this._v("\n./vendor/bin/phpinsights analyse path/to/analyse.php\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("php artisan insights path/to/analyse\n")])])])},function(){var t=this._self._c;return t("ul",[t("li",[this._v("Add "),t("code",[this._v("--fix")]),this._v(" option to your command. The output will be the classical output, with a summary of all issues fixed.")]),this._v(" "),t("li",[this._v("Or launch "),t("code",[this._v("phpinsights fix [directory]")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Classical command with --fix option")]),t._v("\nvendor/bin/phpinsights analyse path/to/analyse "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--fix")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# In laravel")]),t._v("\nphp artisan insights path/to/analyse "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--fix")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Just fix")]),t._v("\nvendor/bin/phpinsights fix path/to/analyse\n")])])])},function(){var t=this._self._c;return t("p",[this._v("You can ask "),t("code",[this._v("phpinsights")]),this._v(" to analyse multiple directories, multiple files or even combining them by providing multiple paths with "),t("code",[this._v("analyse")]),this._v(" command:")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# For multiple directories")]),this._v("\n./vendor/bin/phpinsights analyse path/to/dir1 path/to/dir2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# For multiple files")]),this._v("\n./vendor/bin/phpinsights analyse path/to/file1.php path/to/file2.php\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# Combined")]),this._v("\n./vendor/bin/phpinsights analyse path/to/dir path/to/file.php\n")])])])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("php artisan insights path/to/dir path/to/file.php\n")])])])},function(){var t=this._self._c;return t("p",[this._v("Optionally, you can specify your composer file by adding the "),t("code",[this._v("composer")]),this._v(" flag as below:")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("./vendor/bin/phpinsights analyse "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[this._v("--composer")]),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("/var/www/composer.json\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"formatting-the-output"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#formatting-the-output"}},[this._v("#")]),this._v(" Formatting the output")])},function(){var t=this._self._c;return t("p",[this._v("For changing the output format you can add the "),t("code",[this._v("format")]),this._v(" flag. The following formats are supported:")])},function(){var t=this._self._c;return t("ul",[t("li",[this._v("console")]),this._v(" "),t("li",[this._v("json")]),this._v(" "),t("li",[this._v("checkstyle")])])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("./vendor/bin/phpinsights analyse "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[this._v("--format")]),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("json\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"saving-output-to-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#saving-output-to-file"}},[this._v("#")]),this._v(" Saving output to file")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("./vendor/bin/phpinsights analyse "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[this._v("--format")]),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v("=")]),this._v("json "),t("span",{pre:!0,attrs:{class:"token operator"}},[this._v(">")]),this._v(" test.json\n")])])])},function(){var t=this._self._c;return t("p",[this._v("When piping the result remember to add the no interaction flag "),t("code",[this._v("-n")]),this._v(", as the part where you need to interact is also getting piped. (the json format does not have any interaction)\nWhile piping data, if you want the progress bar to refresh itself instead of printing a new one, add the "),t("code",[this._v("--ansi")]),this._v(" flag.")])},function(){var t=this._self._c;return t("h2",{attrs:{id:"allowed-memory-size-of-x-bytes-exhausted"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#allowed-memory-size-of-x-bytes-exhausted"}},[this._v("#")]),this._v(" Allowed memory size of X bytes exhausted")])},function(){var t=this._self._c;return t("p",[this._v("If you encounter the error "),t("code",[this._v("Allowed memory size of XXXXX bytes exhausted")]),this._v(", the current workaround is to increase the memory limit:")])},function(){var t=this._self._c;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("php -d memory_limit=2000M ./vendor/bin/phpinsights\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"display-issues-omitted"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#display-issues-omitted"}},[this._v("#")]),this._v(" Display issues omitted")])},function(){var t=this._self._c;return t("p",[this._v("The PHP Insights console command has different verbosity levels, which determine the quantity of issues displayed. By default, commands display only the 3 first issues per "),t("code",[this._v("Insight")]),this._v(", but you can display them all with the "),t("code",[this._v("-v")]),this._v(" option:")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[this._v("./vendor/bin/phpinsights "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[this._v("-v")]),this._v("\n")])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"avoid-composer-conflicts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#avoid-composer-conflicts"}},[this._v("#")]),this._v(" Avoid Composer conflicts")])},function(){var t=this._self._c;return t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[this._v("composer")]),this._v(" require "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[this._v("--dev")]),this._v(" bamarni/composer-bin-plugin\n"),t("span",{pre:!0,attrs:{class:"token function"}},[this._v("composer")]),this._v(" bin phpinsights require nunomaduro/phpinsights\n./vendor/bin/phpinsights\n")])])])},function(){var t=this._self._c;return t("p",[this._v("Between 2 analyses, issues are cached.\nPHPInsights is smart enough to invalidate cache when it detects changes in your code, but you may completely flush cache before analysis by adding "),t("code",[this._v("--flush-cache")]),this._v(" flag.")])},function(){var t=this._self._c;return t("p",[this._v("Some insights display a diff output.\nIf you want more context on the diff, configure it in the "),t("code",[this._v("phpinsights.php")]),this._v(" file:")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'diff_context'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}],!1,null,null,null);s.default=n.exports}}]);